<!doctype html>
<html data-n-head-ssr prefix="og: http://ogp.me/ns#" data-n-head="prefix">
  <head>
    <title>gitでssh接続したときNuxt.jsのdeployがコケる - ZODIAC BLOG</title><meta data-n-head="ssr" data-hid="description" name="description" content="技術ブログ"><meta data-n-head="ssr" data-hid="og:site_name" property="og:site_name" content="ZODIAC BLOG"><meta data-n-head="ssr" data-hid="og:type" property="og:type" content="website"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://avatars1.githubusercontent.com/u/12181838?s=460&av=4"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content="https:zodiac-G12.github.io/blog/2019-09-28"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="programming"><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="ZODIAC BLOG - gitでssh接続したときNuxt.jsのdeployがコケる"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/blog/favicon.ico"><base href="/blog/"><link rel="preload" href="/blog/_nuxt/09215de29be3b24979e3.js" as="script"><link rel="preload" href="/blog/_nuxt/1e8c8fdf4a277981be11.js" as="script"><link rel="preload" href="/blog/_nuxt/c3a20940e8372a19bb9f.js" as="script"><link rel="preload" href="/blog/_nuxt/4595c1e0d0de2a9e411b.js" as="script"><link rel="preload" href="/blog/_nuxt/920f384a695bb2b6c87b.js" as="script"><style data-vue-ssr-id="49fccf42:0 3191d5ad:0 932a8f60:0 932a8f60:1 31ebe3ef:0 2932acaf:0">.hljs{display:block;overflow-x:auto;padding:.5em;background:#282828}.hljs,.hljs-subst{color:#ebdbb2}.hljs-deletion,.hljs-formula,.hljs-keyword,.hljs-link,.hljs-selector-tag{color:#fb4934}.hljs-built_in,.hljs-emphasis,.hljs-name,.hljs-quote,.hljs-strong,.hljs-title,.hljs-variable{color:#83a598}.hljs-attr,.hljs-params,.hljs-template-tag,.hljs-type{color:#fabd2f}.hljs-builtin-name,.hljs-doctag,.hljs-literal,.hljs-number{color:#8f3f71}.hljs-code,.hljs-meta,.hljs-regexp,.hljs-selector-id,.hljs-template-variable{color:#fe8019}.hljs-addition,.hljs-meta-string,.hljs-section,.hljs-selector-attr,.hljs-selector-class,.hljs-string,.hljs-symbol{color:#b8bb26}.hljs-attribute,.hljs-bullet,.hljs-class,.hljs-function,.hljs-function .hljs-keyword,.hljs-meta-keyword,.hljs-selector-pseudo,.hljs-tag{color:#8ec07c}.hljs-comment{color:#928374}.hljs-link_label,.hljs-literal,.hljs-number{color:#d3869b}.hljs-comment,.hljs-emphasis{font-style:italic}.hljs-section,.hljs-strong,.hljs-tag{font-weight:700}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}@media screen and (orientation:portrait){:root{--font-size:3.5vw;--landscape:none;--portrait:block}}@media screen and (orientation:landscape){:root{--font-size:1.5vw;--landscape:block;--portrait:none}}body,html{margin:0;padding:0;overflow-x:hidden;font-family:"PT Serif",Ubuntu Mono,Bungee Shade,monospace,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;font-size:var(--font-size);word-break:break-all;background-color:#555;-webkit-background-size:10px 10px;background-image:-webkit-gradient(linear,-5 0,10 150%,color-stop(.5,hsla(0,0%,100%,.1)),color-stop(.5,transparent),to(transparent));-webkit-text-size-adjust:none}body,h1,h2,h3,h4,html{color:#000}a{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-decoration:none}.small-icon{font-size:calc(var(--font-size)*1);width:calc(var(--font-size)*1);height:calc(var(--font-size)*1)}.icon{font-size:calc(var(--font-size)*1.5);width:calc(var(--font-size)*1.5);height:calc(var(--font-size)*1.5);transform:translateY(10%)}.midashi{-webkit-animation:slidein 1s ease-in-out forwards;animation:slidein 1s ease-in-out forwards}@-webkit-keyframes slidein{0%{margin-left:-1vw;opacity:0}to{margin-left:0;opacity:1}}@keyframes slidein{0%{margin-left:-1vw;opacity:0}to{margin-left:0;opacity:1}}main h1,main h2{margin-top:calc(var(--font-size)*2);border-bottom:5px solid;text-align:center}pre code span{font-family:Ubuntu Mono,monospace}.loading{-webkit-animation:load 1s ease-in-out forwards;animation:load 1s ease-in-out forwards}@-webkit-keyframes load{0%{background-color:tomato;opacity:0}to{opacity:1}}@keyframes load{0%{background-color:tomato;opacity:0}to{opacity:1}}@media screen and (orientation:portrait){.black-head{height:20vh}.title{line-height:12vh}}@media screen and (orientation:landscape){.black-head{height:30vh}.title{line-height:19vh}}.black-head{width:100vw;background:linear-gradient(90deg,#7e0f4b,#1a5865);margin:0;color:snow}.title{text-align:center;font-family:Bungee Inline;font-weight:400;margin-top:0;color:#fff}.title span{margin-right:-.5vw;-webkit-animation:bakemono 10s ease-in-out infinite;animation:bakemono 10s ease-in-out infinite}@-webkit-keyframes bakemono{0%{font-family:Bungee Inline}to{font-family:Bungee Shade}}@keyframes bakemono{0%{font-family:Bungee Inline}to{font-family:Bungee Shade}}.title span:first-of-type{-webkit-animation-delay:0s;animation-delay:0s}.title span:nth-of-type(2){-webkit-animation-delay:.1s;animation-delay:.1s}.title span:nth-of-type(3){-webkit-animation-delay:.25s;animation-delay:.25s}.title span:nth-of-type(4){-webkit-animation-delay:.45s;animation-delay:.45s}.title span:nth-of-type(5){-webkit-animation-delay:.7s;animation-delay:.7s}.title span:nth-of-type(6){-webkit-animation-delay:1s;animation-delay:1s}.title span:nth-of-type(7){-webkit-animation-delay:1.35s;animation-delay:1.35s}.title span:nth-of-type(8){-webkit-animation-delay:1.75s;animation-delay:1.75s}.title span:nth-of-type(9){-webkit-animation-delay:2.2s;animation-delay:2.2s}.title span:nth-of-type(10){-webkit-animation-delay:2.7s;animation-delay:2.7s}.star{color:gold;position:fixed;top:7vh}.foot{width:100vw;height:15vh;background:#000;text-align:center;padding-top:3vh;bottom:0}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="loading"><div><div class="black-head"><h1 class="title"><span>Z</span> <span>O</span> <span>D</span> <span>I</span> <span>A</span> <span>C</span> <span style="margin-left:var(--font-size)">B</span> <span>L</span> <span>O</span> <span>G</span></h1> <h4 style="line-height:1vh;color:snow;text-align:center;font-weight:700">~ 技術的な防備録 ~</h4></div> <div style="padding:1vw 1vw 1vw 2vw;color:#000;background:#e6e6fa;box-shadow:5px 5px 0 0 #d3d3d3;margin:0 5vw 0 5vw"><a onmouseover='this.style.color="red"' onmouseout='this.style.color="black"' style="color:#000;font-weight:700"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="igloo" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="small-icon svg-inline--fa fa-igloo fa-w-18"><path fill="currentColor" d="M320 33.9c-10.5-1.2-21.2-1.9-32-1.9-99.8 0-187.8 50.8-239.4 128H320V33.9zM96 192H30.3C11.1 230.6 0 274 0 320h96V192zM352 39.4V160h175.4C487.2 99.9 424.8 55.9 352 39.4zM480 320h96c0-46-11.1-89.4-30.3-128H480v128zm-64 64v96h128c17.7 0 32-14.3 32-32v-96H411.5c2.6 10.3 4.5 20.9 4.5 32zm32-192H128v128h49.8c22.2-38.1 63-64 110.2-64s88 25.9 110.2 64H448V192zM0 448c0 17.7 14.3 32 32 32h128v-96c0-11.1 1.9-21.7 4.5-32H0v96zm288-160c-53 0-96 43-96 96v96h192v-96c0-53-43-96-96-96z"></path></svg> BlogのHome
    </a> <b style="margin-left:1vw;margin-right:1vw">></b> <b></b></div> <main style="padding:5vw"><h3 style="box-shadow:5px 5px 0 0 #2f4f4f;background:linear-gradient(-45deg,#2f4f4f,#000,#2f4f4f);color:#fff;padding:2vw;text-align:center"><b class="midashi" style="border-bottom:dotted 3px #dc143c">
                gitでssh接続したときNuxt.jsのdeployがコケる
                <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="vuejs" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon svg-inline--fa fa-vuejs fa-w-14" style="color:#ff8c00"><path fill="currentColor" d="M356.9 64.3H280l-56 88.6-48-88.6H0L224 448 448 64.3h-91.1zm-301.2 32h53.8L224 294.5 338.4 96.3h53.8L224 384.5 55.7 96.3z"></path></svg></b></h3> <div style="box-shadow:5px 5px 0 0 wheat;background:#fff;padding:5vw"><h2 id="やっとのssh接続">やっとのssh接続</h2>
<p>　CLIでpushすんのaccount_nameとpassword入れないで楽チンになった！
と思っていたら、master pushは上手く行っても、</p>
<pre><code class="sh">$ sudo npm run deploy</code></pre>
<p>がうまくいかない。これは、公式に則って、<strong>package.json</strong>にて、</p>
<pre><code class="JS">{
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"deploy"</span>: <span class="hljs-string">"push-dir --dir=dist --branch=gh-pages --verbose --cleanup"</span>,</code></pre>
<p>としてある。｢<strong>--verbose</strong>｣は追加した。ログが出るので。</p>
<h2 id="何処でコケるの？">何処でコケるの？</h2>
<p>　一連のdeployの処理を見ていて、どうやら｢<strong>git push origin HEAD:gh-pages --force</strong>｣
でしくっている。</p>
<pre><code class="sh">git push origin HEAD:gh-pages --force
ssh: Could not resolve hostname github: Name or service not known
fatal: Could not <span class="hljs-built_in">read</span> from remote repository.

Please make sure you have the correct access rights
and the repository exists.　</code></pre>
<p>コマンドラインで｢<strong>git push origin HEAD:gh-pages --force</strong>｣を実行すると通る。。。</p>
<h2 id="結果">結果</h2>
<p>　deployのときだけ、~/.gitconfigの以下の箇所をコメントアウトして行うようにしたら、上手くいった。何故だ。</p>
<pre><code># [url "github:"]
# InsteadOf = https://github.com/
# InsteadOf = git@github.com:</code></pre></div></main> <footer class="foot"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter-square" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" onmouseover='this.style.color="darkorange"' onmouseout='this.style.color="gold"' onclick='location.href="https://twitter.com/zodiac_G12"' class="icon svg-inline--fa fa-twitter-square fa-w-14" style="color:gold;margin:0 1vw 0 1vw"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg> <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github-square" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" onmouseover='this.style.color="darkorange"' onmouseout='this.style.color="gold"' onclick='location.href="https://github.com/zodiac-G12"' class="icon svg-inline--fa fa-github-square fa-w-14" style="color:gold;margin:0 1vw 0 1vw"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"></path></svg> <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="h-square" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" onmouseover='this.style.color="darkorange"' onmouseout='this.style.color="gold"' onclick='location.href="https://zodiac-G12.github.io/homepage"' class="icon svg-inline--fa fa-h-square fa-w-14" style="color:gold;margin:0 1vw 0 1vw"><path fill="currentColor" d="M448 80v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48zm-112 48h-32c-8.837 0-16 7.163-16 16v80H160v-80c0-8.837-7.163-16-16-16h-32c-8.837 0-16 7.163-16 16v224c0 8.837 7.163 16 16 16h32c8.837 0 16-7.163 16-16v-80h128v80c0 8.837 7.163 16 16 16h32c8.837 0 16-7.163 16-16V144c0-8.837-7.163-16-16-16z"></path></svg> <p style="color:snow;font-weight:700">© ZODIAC-G12 2019</p></footer></div></div></div></div><script>window.__NUXT__={layout:"default",data:[{}],error:null,serverRendered:!0}</script><script src="/blog/_nuxt/09215de29be3b24979e3.js" defer></script><script src="/blog/_nuxt/920f384a695bb2b6c87b.js" defer></script><script src="/blog/_nuxt/1e8c8fdf4a277981be11.js" defer></script><script src="/blog/_nuxt/c3a20940e8372a19bb9f.js" defer></script><script src="/blog/_nuxt/4595c1e0d0de2a9e411b.js" defer></script>
  </body>
</html>
