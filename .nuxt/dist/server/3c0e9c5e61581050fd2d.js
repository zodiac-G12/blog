exports.ids=[1],exports.modules={31:function(t,e,n){"use strict";var o=n(28),l=n.n(o),r={data:function(){return{now:l()().tz("Asia/Tokyo").format("ll")}}},c=n(3),component=Object(c.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"foot"},[e("font-awesome-icon",{staticClass:"icon",staticStyle:{color:"gold"},attrs:{onmouseover:"this.style.color='darkorange'",onmouseout:"this.style.color='gold'",onclick:"location.href='https://twitter.com/zodiac_G12'",icon:["fab","twitter-square"]}}),this._ssrNode(" "),e("font-awesome-icon",{staticClass:"icon",staticStyle:{color:"gold"},attrs:{onmouseover:"this.style.color='darkorange'",onmouseout:"this.style.color='gold'",onclick:"location.href='https://github.com/zodiac-G12'",icon:["fab","github-square"]}}),this._ssrNode(' <p style="color:snow;">'+this._ssrEscape("© ZODIAC-G12 "+this._s(this.now))+"</p>")],2)}),[],!1,null,null,"39ff05ed");e.a=component.exports},32:function(t,e,n){"use strict";var o=n(3),component=Object(o.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"black-head"},[this._ssrNode('<h1 class="title" style="line-height:15vh;">ZODIAC BLOG</h1> <h4 style="line-height:1vh;color:snow;">~ 技術的な防備録 ~</h4>')])}),[],!1,null,null,"5b3169df");e.a=component.exports},33:function(t,e,n){var content=n(36);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var o=n(5).default;t.exports.__inject__=function(t){o("48331b64",content,!0,t)}},34:function(t,e,n){"use strict";var o={data:function(){return{pre:null,dir:null}},mounted(){this.pre=location.href.split("blog")[0]+"blog/",this.dir=" > "+location.href.replace(this.pre,"")}},l=n(3),component=Object(l.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{padding:"1vw",width:"100vw",color:"black",background:"seagreen"}},[this._ssrNode("<a onmouseover=\"this.style.color='maroon'\" onmouseout=\"this.style.color='black'\""+this._ssrAttr("href",this.pre)+' style="color:black">',"</a>",[e("font-awesome-icon",{staticClass:"small-icon",attrs:{icon:["fas","igloo"]}}),this._ssrNode(" Home")],2),this._ssrNode(this._ssrEscape(this._s(this.dir)+"\n"))],2)}),[],!1,null,null,"cc04c44e");e.a=component.exports},35:function(t,e,n){"use strict";n.r(e);var o=n(33),l=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e.default=l.a},36:function(t,e,n){(t.exports=n(4)(!1)).push([t.i,".hljs{display:block;overflow-x:auto;padding:.5em;background:#282828}.hljs,.hljs-subst{color:#ebdbb2}.hljs-deletion,.hljs-formula,.hljs-keyword,.hljs-link,.hljs-selector-tag{color:#fb4934}.hljs-built_in,.hljs-emphasis,.hljs-name,.hljs-quote,.hljs-strong,.hljs-title,.hljs-variable{color:#83a598}.hljs-attr,.hljs-params,.hljs-template-tag,.hljs-type{color:#fabd2f}.hljs-builtin-name,.hljs-doctag,.hljs-literal,.hljs-number{color:#8f3f71}.hljs-code,.hljs-meta,.hljs-regexp,.hljs-selector-id,.hljs-template-variable{color:#fe8019}.hljs-addition,.hljs-meta-string,.hljs-section,.hljs-selector-attr,.hljs-selector-class,.hljs-string,.hljs-symbol{color:#b8bb26}.hljs-attribute,.hljs-bullet,.hljs-class,.hljs-function,.hljs-function .hljs-keyword,.hljs-meta-keyword,.hljs-selector-pseudo,.hljs-tag{color:#8ec07c}.hljs-comment{color:#928374}.hljs-link_label,.hljs-literal,.hljs-number{color:#d3869b}.hljs-comment,.hljs-emphasis{font-style:italic}.hljs-section,.hljs-strong,.hljs-tag{font-weight:700}",""])},37:function(t,e,n){"use strict";n.r(e);var o=n(28),l=n.n(o),r=n(32),c=n(31),h=n(34),d=n(29),_=n.n(d),j=n(30),f=n.n(j),m={data:function(){return{now:l()().tz("Asia/Tokyo").format("ll"),heisokuview:null,heisoku:'\n```sh\n####################################################################\n#\n#    メンテナンス開始のshellスクリプト(4つルールができる)\n#\n####################################################################\n\n\n# AWS ALBのリスナーのARNのjsonファイル名\njson="aws_alb_listener_dev_arn.json"\nmaintenance_statusCode=503\n\n# リスナーのARN\nlistener_one=$( cat $json | jq \'.[]\' | jq \'.[0]\' | jq -r \'.[]\' )\nlistener_two=$( cat $json | jq \'.[]\' | jq \'.[1]\' | jq -r \'.[]\' )\n\n\n############################# API v* 直下にアクセスされたときのJSON レスポンス(×2) #############################\n\n# 出力されたjsonをtmp.jsonとして一時保存\naws elbv2 create-rule \\\n    --listener-arn $listener_one \\\n    --conditions Field=path-pattern,Values="/api/v*" \\\n    --priority 1 \\\n    --actions Type=fixed-response,FixedResponseConfig=\n    \\{"MessageBody=\n    \'\\{\\"id\\":-5000,\n    \\"description\\":\\"ただいまメンテナンス中です。しばらくお待ちください\\"\\}\',\n    StatusCode=$maintenance_statusCode,ContentType=application/json"\\} | tee tmp.json\n\n# ルールのARNを抽出(1個目)\nrule_three=$( cat tmp.json | jq \'.Rules[0].RuleArn\' )\n\naws elbv2 create-rule \\\n    --listener-arn $listener_two \\\n    --conditions Field=path-pattern,Values="api/v*" \\\n    --priority 1 \\\n    --actions Type=fixed-response,FixedResponseConfig=\n    \\{"MessageBody=\n    \'\\{\\"id\\":-5000,\n    \\"description\\":\\"ただいまメンテナンス中です。しばらくお待ちください\\"\\}\'\n    ,StatusCode=$maintenance_statusCode,ContentType=application/json"\\} | tee tmp.json\n\n# ルールのARNを抽出(2個目)\nrule_four=$( cat tmp.json | jq \'.Rules[0].RuleArn\' )\n\n\n############################# API v* 直下以外の任意のパスにアクセスされたときのHTML レスポンス(×2) #############################\n\naws elbv2 create-rule \\\n    --listener-arn $listener_one \\\n    --conditions Field=path-pattern,Values="*" \\\n    --priority 2 \\\n    --actions Type=fixed-response,FixedResponseConfig=\n    \\{"MessageBody=\n    <body><p>ただいまメンテナンス中です。しばらくお待ちください</p></body>\n    ,StatusCode=$maintenance_statusCode,ContentType=text/html"\\} | tee tmp.json\n\n# ルールのARNを抽出(3個目)\nrule_one=$( cat tmp.json | jq \'.Rules[0].RuleArn\' )\n\naws elbv2 create-rule \\\n    --listener-arn $listener_two \\\n    --conditions Field=path-pattern,Values="*" \\\n    --priority 2 \\\n    --actions Type=fixed-response,FixedResponseConfig=\n    \\{"MessageBody=\n    <body><p>ただいまメンテナンス中です。しばらくお待ちください</p></body>,\n    StatusCode=$maintenance_statusCode,ContentType=text/html"\\} | tee tmp.json\n\n# ルールのARNを抽出(4個目)\nrule_two=$( cat tmp.json | jq \'.Rules[0].RuleArn\' )\n\n\n# ルールのARNを変数に代入したらいらないので消す\nrm tmp.json\n\n# ルールのARNの保存形式\nrule_arn_json="\\{\n    \\"development_alb_rule_arns\\": [\n        \\{\\"rule_one\\": $rule_one\\},\n        \\{\\"rule_two\\": $rule_two\\},\n        \\{\\"rule_three\\": $rule_three\\},\n        \\{\\"rule_four\\": $rule_four\\}\n    ]\n\\}"\n\n# ルールのARNのjsonを新規作成する\necho $rule_arn_json | tee aws_alb_rule_dev_arn.json\n\necho maintenance start.\n\n```\n            '}},created:function(){f.a.setOptions({langPrefix:"",highlight:function(code,t){return _.a.highlightAuto(code,[t]).value}})},mounted(){_.a.initHighlightingOnLoad(),this.heisokuview=f()(this.heisoku)},components:{defaultFooter:c.a,defaultHeader:r.a,pankuz:h.a}},y=n(3);var component=Object(y.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("default-header"),t._ssrNode(" "),n("pankuz"),t._ssrNode(" "),t._ssrNode('<main style="margin:2vw;color:black;">',"</main>",[t._ssrNode("<h3>","</h3>",[t._ssrNode("\n            AWS ALB のメンテナンス閉塞をShellスクリプト化した\n        "),n("font-awesome-icon",{staticClass:"icon",staticStyle:{color:"#fd7e14"},attrs:{icon:["fab","aws"]}})],2),t._ssrNode(" "),n("a-divider",{staticStyle:{background:"black"},attrs:{type:"horizontal"}}),t._ssrNode(" "),t._ssrNode("<b>","</b>",[n("font-awesome-icon",{staticClass:"icon",staticStyle:{color:"midnightblue"},attrs:{icon:["fab","linux"]}}),t._ssrNode(" \n                ＜ AWS ALB ってなんですか？\n        ")],2),t._ssrNode(" "),t._ssrNode('<p style="margin-top:5vh;">',"</p>",[n("font-awesome-icon",{staticClass:"icon",staticStyle:{color:"#fd7e14"},attrs:{icon:["fab","angular"]}}),t._ssrNode(' \n            ＜<a href="https://docs.aws.amazon.com/ja_jp/elasticloadbalancing/latest/application/introduction.html">\n                https://docs.aws.amazon.com/ja_jp/elasticloadbalancing/latest/application/introduction.html\n            </a>')],2),t._ssrNode(" "),t._ssrNode('<b style="margin-top:5vh;">',"</b>",[n("font-awesome-icon",{staticClass:"icon",staticStyle:{color:"midnightblue"},attrs:{icon:["fab","linux"]}}),t._ssrNode(" \n                ＜ なぜシェルスクリプト化したんですか？\n        ")],2),t._ssrNode(" "),t._ssrNode('<p style="margin-top:5vh;">',"</p>",[n("font-awesome-icon",{staticClass:"icon",staticStyle:{color:"#fd7e14"},attrs:{icon:["fab","angular"]}}),t._ssrNode(" \n            ＜ 教える筋合いないです。仮にそんな方には説明してもわからないと思います。\n        ")],2),t._ssrNode(" "),t._ssrNode("<h3>","</h3>",[t._ssrNode("\n            いきなりコード\n            "),n("font-awesome-icon",{staticClass:"icon",staticStyle:{color:"#fd7e14"},attrs:{icon:["fas","bath"]}})],2),t._ssrNode(" "),n("a-divider",{staticStyle:{background:"black"},attrs:{type:"horizontal"}}),t._ssrNode(" <pre>"+t._s(t.heisokuview)+"</pre> <b>本当にごめんなさい。今度詳細記事書きます。</b>")],2),t._ssrNode(" "),n("default-footer")],2)}),[],!1,(function(t){var e=n(35);e.__inject__&&e.__inject__(t)}),null,"1cd0b92e");e.default=component.exports}};
//# sourceMappingURL=3c0e9c5e61581050fd2d.js.map